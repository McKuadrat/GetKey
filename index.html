<script>
    const questions = {
        1: [
            { question: "5 + 3 =", answer: 8 },
            { question: "7 - 2 =", answer: 5 },
            { question: "1 + 6 =", answer: 7 }
        ],
        2: [
            { question: "12 + 5 =", answer: 17 },
            { question: "10 - 4 =", answer: 6 },
            { question: "8 + 8 =", answer: 16 }
        ],
        3: [
            { question: "25 + 10 =", answer: 35 },
            { question: "30 - 15 =", answer: 15 },
            { question: "12 + 20 =", answer: 32 }
        ]
    };

    let currentLevel = 1;
    let currentQuestionIndex = [];
    let currentQuestion = {};

    function loadQuestion() {
        // If all questions have been answered, reset the question index
        if (currentQuestionIndex.length === questions[currentLevel].length) {
            currentQuestionIndex = [];
        }

        // Select a random question index that hasn't been used yet
        let randomIndex;
        do {
            randomIndex = Math.floor(Math.random() * questions[currentLevel].length);
        } while (currentQuestionIndex.includes(randomIndex));

        currentQuestionIndex.push(randomIndex);
        currentQuestion = questions[currentLevel][randomIndex];

        document.getElementById('question').textContent = currentQuestion.question;
        document.getElementById('answer').value = '';
    }

    function checkAnswer() {
        const userAnswer = parseInt(document.getElementById('answer').value);
        const correctAnswer = currentQuestion.answer;
        if (userAnswer === correctAnswer) {
            if (currentQuestionIndex.length < questions[currentLevel].length) {
                loadQuestion();
            } else {
                document.getElementById('quiz').style.display = 'none';
                document.getElementById('result').style.display = 'block';
            }
        } else {
            alert("Wrong answer! Try again.");
        }
    }

    function selectReward() {
        const reward = document.querySelector('input[name="reward"]:checked').value;
        if (reward === 'key') {
            document.getElementById('keyCode').textContent = "0932982";
            document.getElementById('copyKey').style.display = 'block';
        } else {
            alert('Coming Soon!');
        }
    }

    function copyKey() {
        const key = document.getElementById('keyCode').textContent;
        navigator.clipboard.writeText(key).then(() => {
            alert('CoordGui Key copied to clipboard!');
        });
    }

    window.onload = loadQuestion;
</script>
